<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8" />
	 <script src="lib.js"></script>
	 <script src="dragAndDrop.js"></script>
	<style>
	.sentence{
	display: inline-block;
	position: relative;
	width: 100px
	height: 20px;
	background: yellow;
	top: 20px;
	left: 20px;
	margin-right: 20px;
	}
	
	.empty{
	display: inline-block;
	background: green;
	width: 150px;
	height: 30px;
	position: relative;
	top: 50px;
	left: 50px;
	margin-right: 20px;
	
	}
	
	td{
	width: 600px;
	}
	</style>


</head>
<body>


<table><tr><td></td><td></td></tr></table>

<script type="text/javascript">

//TODO: подсветка неправильного, запрет дальнейшего перемещения, аякс запро
function shuffle(v){
    for(var j, x, i = v.length; i; j = parseInt(Math.random() * i), x = v[--i], v[i] = v[j], v[j] = x);
    return v;
};

function isEqual(etalon, current){
	if (etalon == current) return true;
}

//При загрузке страницы, при нажатии на кнопку
var jsonStr = '{"0": "Мама", "1": "мыла", "2": "раму"}';
var arEtalon = JSON.parse(jsonStr);
var arShuffle = [];
for (i = 0; i <3; i++){
	arShuffle[i] = arEtalon[i];
}
shuffle(arShuffle);

var divArrayFull = [];
var divArrayEmpty = [];
var parentElem = document.body.getElementsByTagName("td")[0];
var parentElemEmpt = document.body.getElementsByTagName("td")[1];

for (i = 0; i < arShuffle.length; i++){
	divArrayFull[i] = document.createElement("DIV");
	divArrayFull[i].className = "sentence";
	divArrayFull[i].innerHTML = arShuffle[i];
	divArrayFull[i].setAttribute("draggable","true");
	parentElem.appendChild(divArrayFull[i]);
	

	divArrayEmpty[i] = document.createElement("DIV");
	divArrayEmpty[i].className = "empty";
	divArrayEmpty[i].setAttribute("droppable", "true");
	divArrayEmpty[i].setAttribute("number", i);
	parentElemEmpt.appendChild(divArrayEmpty[i]);

}

 dManager.onDragEnd = function(dObject, dElem) {

	if (isEqual(dObject.element.innerHTML, arEtalon[dElem.getAttribute('number')])){ 
	
	//dObject.removeAttribute(draggable); 
	}
	else {dElem.style.background = "red"}; //TODO: убирать ошибку
      

    };



</script>

</body>
</html>
