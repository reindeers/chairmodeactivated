<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<html lang = "ru">
<head>
<title></title>
</head>
<body>
<script>

var constrTable = function(fTable){
	var that = this;
	return{
		from: fTable["from"] || "not identf",
		to: fTable["to"] || "not identf",
		getFrom: function(){
			return this.from;
		},
		getTo: function(){
			return this.to;
		}
	}
}

var cardSet = function(){
	var nCard = [],
		that = this,
		notSortTables = {
			"card0": {"from": "Москва", "to": "Лондон"},
			"card1": {"from": "Лондон", "to": "Прага"},
			"card2": {"from": "Прага", "to": "Вильнюс"}
		}; //выбирать с сервера

		
	return {
		doSet: function(){
			for (var i = 0; i < 3; i++){
				var pName = "card" + i;
				nCard[i] = constrTable(notSortTables[pName]);
			}
		}(),
		
		getSet: function(){
			return nCard;
		},
		
		hashAdd: function hAdd(){
			var hArr = [],
				uniqTabl = "Москва";

			
			for (var j = 0; j < (nCard.length - 1); j++){
			var cSet0 = nCard[j],
				cSet1 = nCard[j+1],
				count = 0;
				
			
			
			hArr.push(cSet0.getTo());

			var checkUniq = function(){
				for (var i = 0; i < hArr.length; i++){
					if (cSet1.getFrom() != hArr[i])  count++; uniqT = cSet1.getFrom();
				}
				if (count == hArr.length) uniqTabl = uniqT;
			}
			
			} //TODO: рефакторинг
			
			checkUniq();
			return uniqTabl;
	
		}
	}
}();


console.log(cardSet.getSet());
console.log(cardSet.hashAdd());
</script>
</body>
</html>
